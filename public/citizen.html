<!DOCTYPE html>
<html lang="en">

<head>
    <title>Citizen Contribution - Add your contribution to Green Charlotte</title>
    <!-- meta information -->
    <meta charset="UTF-8">
    <meta name="description" content="Free Web tutorials">
    <meta name="keywords" content="Green Charlotte, Green Locations in Charlotte">
    <meta name="author" content="Green Charlotte">
    <meta property=”og:image” content="../public/assets/images/park.jpg" />
    <meta property="og:locale" content="en_US" />
    <meta property="og:type" content="form" />
    <!-- Latest compiled and minified CSS & JS -->
    <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.6/css/bootstrap.min.css" integrity="sha384-1q8mTJOASx8j1Au+a5WDVnPi2lkFfwwEAa8hDDdjZlpLegxhjVME1fgjWPGmkzs7" crossorigin="anonymous">
    <link rel="stylesheet" href="css/styles.css" media="screen" title="no title">
    <script src="https://code.jquery.com/jquery.js"></script>
    <script src="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.6/js/bootstrap.min.js"></script>
</head>

<body>
    <div class="container">
        <h2 align="middle">Citizen Contribution for Green Charlotte</h2>
        <div class="row">
            <!-- FORM -->
            <div class="col-md-6 col-md-offset-3">
                <form id="citizenContribution">
                    <div class="form-group">
                        <!-- Feature Main -->
                        <div class="panel panel-success">
                            <div class="panel-heading">
                                <h1 class="panel-title">
                                    <span class="glyphicon glyphicon-globe">
      							</span> &nbsp;Feature Information
                                </h1>
                            </div>
                            <div class="panel-body">

                                <!-- Feature Name, required  -->
                                <label for="FeatureName">Feature Name:</label>
                                <!-- updated to match DB -->
                                <input type="text" class="form-control" id="featureName" required>
                                <br />
                                <!-- DB Theme, labeled category, required -->
                                <label for="Theme">Select Category:</label>
                                <!-- for changed to match DB -->
                                <select class="form-control" id="category" required>
								<option value="B-Cycle Station">B-Cycle Station</option>
								<option value="Big Belly Station">Big Belly Station</option>
								<option value="Bike Trail">Bike Trail</option>
								<option value="Community Garden">Community Garden</option>
								<option value="Electric Vehicle Charging Station">Electric Vehicle Charging Station</option>
								<option value="Farm">Farm</option>
								<option value="Farmer's Market">Farmer's Market</option>
								<option value="Green Roof">Green Roof</option>
								<option value="Greenway/Trail">Greenway/Trail</option>
								<option value="LEED Certified Building">LEED Certified Building</option>
								<option value="Park">Park</option>
								<option value="Solar">Solar</option>
								<option value="Tree">Tree</option>
  							</select>

                                <!-- Feature Description, required  -->
                                <label for="FeatureDetails">Feature Description:</label>
                                <textarea class="form-control" rows="3" id="body"></textarea>

                            </div>
                        </div>

                        <!-- Feature Location Information -->
                        <div class="panel panel-success">
                            <div class="panel-heading">
                                <h1 class="panel-title">
                                    <span class="glyphicon glyphicon-map-marker">
      							</span> &nbsp;Location Information
                                </h1>
                            </div>
                            <div class="panel-body">

                                <!-- Feature Location Street Address, required -->
                                <label for="FeatureLocation">Location Street Address:</label>
                                <input type="text" class="form-control" id="FeatureLocation" required>

                                <br />
                                <!-- Feature Location Zip, required -->
                                <label for="FeatureZip">Location Zip Code:</label>
                                <input type="text" class="form-control" id="FeatureZip" required>

                                <br />
                                <!-- Feature Latitude required -->
                                <label for="Latitude">Location Latitude Coordinate:</label>
                                <input type="number" class="form-control" id="Latitude" required>

                                <br />
                                <!-- Feature Longitude required -->
                                <label for="Longitude">Location Longitude Coordinate:</label>
                                <input type="number" class="form-control" id="Longitude" required>


                            </div>
                        </div>

                        <!-- Image(s) Details. not required -->

                        <div class="panel panel-success">
                            <div class="panel-heading">
                                <h1 class="panel-title">
                                    <span class="glyphicon glyphicon-picture">
      							</span> &nbsp;Image Information
                                </h1>
                            </div>
                            <div class="panel-body">

                                <!-- Image 1 URL -->
                                <label for="Image1Path">Image URL:</label>
                                <div class="input-group"><span class="input-group-addon glyphicon glyphicon-link"></span>
                                    <input type="url" class="form-control" id="Image1Path">
                                </div>
                                <br />
                                <!-- Image 1 Description -->
                                <label for="Image1Description">Image Description:</label>
                                <input type="text" class="form-control" id="Image1Description">
                                <br />
                            </div>
                        </div>

                        <!-- URLs, not required -->
                        <div class="panel panel-success">
                            <div class="panel-heading">
                                <h1 class="panel-title">
                                    <span class="glyphicon glyphicon-link">
      							</span> &nbsp;Link Information
                                </h1>
                            </div>
                            <div class="panel-body">

                                <!-- URL 1 to feature site -->
                                <label for="Link1Path">Feature Site URL:</label>
                                <div class="input-group"><span class="input-group-addon glyphicon glyphicon-link"></span>
                                    <input type="url" class="form-control" id="Link1Path">
                                </div>
                                <br />
                                <!-- URL 1 Name -->
                                <label for="Link1Description">Feature Site URL Name:</label>
                                <input type="text" class="form-control" id="Link1Description">
                                <br />
                            </div>
                        </div>

                    </div>

                    <!-- Submit the Citizen Contr. from -->
                    <button type="submit" class="btn btn-success" id="submit">Submit</button>
            </div>
            </form>
        </div>
    </div>

    </div>


    <!-- Submit Script  -->

    <script type="text/javascript">
        // Capture the form inputs 
        $("#submit").on("click", function() {
            event.preventDefault();
            // Form validation
            function validateForm() {
                var isValid = true;
                $('.form-control').each(function() {
                    if ($(this).val() === '')
                        isValid = false;
                });
                $('.chosen-select').each(function() {
                    if ($(this).val() === "")
                        isValid = false
                })
                return isValid;
                console.log("Form is returned valid");
            }
            // Clear the Form
            function clearForm() {
                console.log("In Post");
                $('.citizenContribution').each(function() {
                    $(this).val('');
                });
            }
            // If all required fields are filled
            if (validateForm() == true) {
                var currentURL = window.location.origin;
                var userData = {
                    FeatureName: $("#featureName").val(),
                    Theme: $("#category").val(),
                    FeatureDetails: $("#body").val(),
                    FeatureLocation: $("#FeatureLocation").val(),
                    Latitude: $("#Latitude").val(),
                    Longitude: $("#Longitude").val(),
                    Image1Path: $("#Image1Path").val(),
                    Image1Description: $("#Image1Description").val(),
                    Link1Path: $("#Link1Path").val(),
                    Link1Description: $("#Link1Description").val(),
                }
                console.log(JSON.stringify(userData));
                var zip = $("#FeatureZip").val();
                // AJAX post the data to greenLocations 
                $.post(currentURL + "/api/citizencontribution", userData, function(data) {
                    console.log("In Post");
                    alert("This was added to the database: " + userData);
                    // Clear the page so someone cannot submit duplicate profiles immediately
                    // clearForm();
                });
            } else {
                alert("ALERT! Please fill out all fields before submitting!");
            }

            return false;
        });
    </script>

</body>

</html>